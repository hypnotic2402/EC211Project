<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <h1>EC211 Project</h1>
        <div>Lights : <span id="light">OFF</span></div>
        <button id = "lightSwitch">ON/OFF</button>
        <script>
            var ls = "OFF";
            

            var data = {ls};
            function sendData(){
                data = {ls};
                fetch('/api' , {
                    method:'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                }).then(response => {
                    if (response){
                        console.log(response);
                    }else
                    {
                        console.log('Waiting for handshake');
                    }
                });
            }
            lightSwitch = document.getElementById("lightSwitch");
            lightSwitch.addEventListener("click" , (event) => {
                if (ls == "OFF") {ls = "ON";}
                else if (ls == "ON") {ls = "OFF";}
                document.getElementById("light").innerText = ls;
                sendData();
                event.preventDefault();
            });

        </script>
    </body>
</html>